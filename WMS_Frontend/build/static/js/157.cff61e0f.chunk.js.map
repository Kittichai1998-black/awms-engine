{"version":3,"sources":["views/page/GCL/Issue/PickingMonitor.js"],"names":["tableHaderColumns","id","label","minWidth","align","format","value","Number","toFixed","toLocaleString","useStyles","makeStyles","root","width","padding","intervalGetSPReportAPI","AddPickingModal","open","handleClose","handleSetToast","handleOnSuccess","useState","wms_doc","setWmsDoc","customer","setCustomer","to_wh","setToWH","grade","setGrade","lot","setLot","sku","setSKU","status","setStatus","qty_pick","setQtyPick","unit","setUnit","isLoading","setIsLoading","useEffect","onClose","aria-labelledby","maxWidth","onSubmit","event","window","loading","onLoading","qty_pick_value","GCLService","post","then","res","onLoaded","data","_result","msg","type","message","preventDefault","autoComplete","autoFocus","margin","fullWidth","required","onChange","target","helperText","InputProps","step","style","backgroundColor","size","variant","onClick","color","startIcon","PickingMonitor","props","classes","dataTable","setDataTable","page","setPage","rowsPerPage","setRowsPerPage","isOpenModalAddPicking","setIsOpenModalAddPicking","toast","setToast","cloasing","setCloasing","confirmClosed","setConfirmClosed","get","spname","isMockData","mockDataGCL","monitorReceive","datas","setInterval","clearInterval","className","display","flexDirection","marginBottom","maxHeight","stickyHeader","aria-label","map","column","key","length","slice","row","index","hover","toLowerCase","indexOf","colSpan","severity","rowsPerPageOptions","component","count","onChangePage","newPage","onChangeRowsPerPage","indexLoading","splice","anchorOrigin","vertical","horizontal","autoHideDuration","elevation"],"mappings":"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","file":"static/js/157.cff61e0f.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from \"react\";\r\nimport Axios from \"axios\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {Paper,Table,TableBody,TableCell,TableContainer,TableHead,TablePagination,TableRow,Snackbar,CircularProgress } from '@material-ui/core';\r\nimport {Button,IconButton,TextField, Dialog, DialogActions,DialogContent,DialogContentText,DialogTitle,Tooltip} from '@material-ui/core';\r\n// import ToastAlert from '../../../../components/function/ToastAlert';\r\nimport GCLService from '../../../../components/function/GCLService';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport {AddCircleOutline,CloseSharp,Save, Cancel, CheckCircleOutlineRounded,CheckCircle} from '@material-ui/icons'\r\nimport \"../../../../assets/css/TableCustom.css\";\r\n\r\nconst tableHaderColumns = [\r\n  {id: 'status', label: 'Status', minWidth: 100},\r\n  {id: 'wms_doc', label: 'WMS\\u00a0Doc', minWidth: 100 },\r\n  {id: 'customer',label: 'Cutomer', minWidth: 100, },\r\n  {id: 'grade',label: 'Grade', minWidth: 100},\r\n  {id: 'lot', label: 'Lot', minWidth: 100},\r\n  {id: 'no_pallet', label: 'No Pallet', minWidth: 100 },\r\n  {id: 'qty', label: 'Qty', minWidth: 100, align:'right', format: (value) => Number(value.toFixed(3)).toLocaleString('en-US') },\r\n  {id: 'unit', label: 'Unit', minWidth: 100 },\r\n  {id: 'waiting_pallet', label: 'Waiting(Pallet)', minWidth: 100, align:'right'},\r\n  {id: 'received_pallet', label: 'Received(Pallet)', minWidth: 100, align:'right'},\r\n  {id: 'action', label: '🛠', minWidth: 100, align:'center'},\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: '100%',\r\n    padding:15\r\n  },\r\n});\r\n\r\nlet intervalGetSPReportAPI=null\r\n\r\nconst PickingMonitor=(props)=>{\r\n  const classes = useStyles();\r\n  const [dataTable, setDataTable] = useState([]);\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(10);\r\n  const [isOpenModalAddPicking,setIsOpenModalAddPicking] = useState(false);\r\n  const [toast,setToast] = useState({msg:null,open:false,type:null});\r\n  const [cloasing,setCloasing] = useState([]);\r\n  const [confirmClosed,setConfirmClosed] = useState(null);\r\n\r\n  useEffect(() => {\r\n        window.loading.onLoading();\r\n        GCLService.get('/v2/GetSPReportAPI',{spname:'Picking_PLAN_Load_Front'}).then(res=>{\r\n            window.loading.onLoaded();\r\n            if(GCLService.isMockData)return setDataTable(GCLService.mockDataGCL.monitorReceive)\r\n            if(!res.data._result.status) {\r\n              setToast({msg:\"Load data fail : \"+res.data._result.message ,open:true,type:'error'})\r\n              return ;\r\n            }\r\n            setDataTable(res.data.datas)\r\n            //auto load data\r\n            intervalGetSPReportAPI=setInterval(()=>{\r\n                GCLService.get('/v2/GetSPReportAPI',{spname:'Picking_PLAN_Load_Front'}).then(res=>{\r\n                  if(!res.data._result.status) {\r\n                    setToast({msg:\"Load data fail : \"+res.data._result.message ,open:true,type:'error'})\r\n                    return ;\r\n                  }\r\n                  setDataTable(res.data.datas)\r\n                })\r\n            },5000)\r\n        })\r\n\r\n        //on component unmount\r\n        return () => {\r\n            clearInterval(intervalGetSPReportAPI);\r\n        }\r\n  }, [])\r\n  \r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(+event.target.value);\r\n    setPage(0);\r\n  };\r\n\r\n  const onAddPickingSuccess=()=>{\r\n    clearInterval(intervalGetSPReportAPI);\r\n    intervalGetSPReportAPI=setInterval(()=>{\r\n      GCLService.get('/v2/GetSPReportAPI',{spname:'Picking_PLAN_Load_Front'}).then(res=>{\r\n        if(!res.data._result.status) {\r\n          setToast({msg:\"Load data fail : \"+res.data._result.message ,open:true,type:'error'})\r\n          return ;\r\n        }\r\n        setDataTable(res.data.datas)\r\n      })\r\n    },5000);\r\n  }\r\n\r\n  const onClosed=(wms_doc)=>{\r\n    setCloasing([...cloasing,wms_doc]);\r\n    GCLService.post('/v2/Picking_Plan_Close_Front',{wms_doc}).then(res=>{\r\n      const indexLoading = cloasing.indexOf(wms_doc);\r\n      if (indexLoading > -1)cloasing.splice(indexLoading, 1);\r\n      setCloasing(cloasing);\r\n      if(!res.data._result.status) {\r\n        setToast({msg:\"Fail : \"+res.data._result.message ,open:true,type:'error'})\r\n        return ;\r\n      }        \r\n      setToast({msg:\"Success\",open:true,type:'success'})\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <AddPickingModal open={isOpenModalAddPicking} handleClose={()=>setIsOpenModalAddPicking(false)} handleSetToast={setToast} handleOnSuccess={onAddPickingSuccess} />\r\n      <div style={{display:'flex',flexDirection:'row-reverse', marginBottom:10}}>\r\n        <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"medium\"\r\n            startIcon={<AddCircleOutline />}\r\n            onClick={()=>setIsOpenModalAddPicking(true)}\r\n        > Add Picking </Button>\r\n      </div>\r\n      <TableContainer className=\"tableCustom\" style={{maxHeight: 440}}>\r\n        <Table stickyHeader aria-label=\"sticky table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {tableHaderColumns.map((column) => (\r\n                <TableCell\r\n                  key={column.id}\r\n                  align={column.align}\r\n                  style={{ minWidth: column.minWidth, backgroundColor:'#BBB',padding:10 }}\r\n                >\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {dataTable.length>0 && dataTable.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row,index) => {\r\n              return (\r\n                <TableRow hover key={index}>\r\n                  {tableHaderColumns.map((column,key) => {\r\n                    const value = row[column.id];\r\n                    if(column.id=='action'){\r\n                      return (\r\n                        <TableCell key={column.id+index} align={column.align} style={{padding:10}}>\r\n                          {(row.status||\"\").toLowerCase()!='Closed'.toLowerCase() &&\r\n                            <Button variant=\"contained\" color=\"primary\" style={{backgroundColor:'#16C050'}} color=\"secondary\" size=\"small\" onClick={()=>setConfirmClosed(row.wms_doc)} disabled={cloasing.length>0}>\r\n                              {cloasing.indexOf(row.wms_doc)>-1 ? <CircularProgress size={20} />:<CheckCircle />} Closed\r\n                            </Button>\r\n                          }\r\n                        </TableCell>\r\n                      );\r\n                    }\r\n                    return (\r\n                      <TableCell key={column.id+index} align={column.align} style={{padding:10}}>\r\n                        {column.format && typeof value === 'number' ? column.format(value) : value}\r\n                      </TableCell>\r\n                    );\r\n                  })}\r\n                </TableRow>\r\n              );\r\n            })}\r\n            {dataTable.length<=0 &&\r\n              <TableRow>\r\n                <TableCell colSpan='11'>\r\n                  <Alert severity='info'>Empty Data</Alert>\r\n                </TableCell>\r\n              </TableRow>\r\n            }\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <TablePagination\r\n        rowsPerPageOptions={[10, 30, 100]}\r\n        component=\"div\"\r\n        count={dataTable.length}\r\n        rowsPerPage={rowsPerPage}\r\n        page={page}\r\n        onChangePage={handleChangePage}\r\n        onChangeRowsPerPage={handleChangeRowsPerPage}\r\n      />\r\n\r\n      <Dialog maxWidth='xl' onClose={()=>setConfirmClosed(null)} aria-labelledby=\"simple-dialog-title\" open={confirmClosed!=null}>\r\n        <DialogTitle id=\"simple-dialog-title\">Are you sure?</DialogTitle>\r\n        <DialogContent>Closed \"{confirmClosed}\"</DialogContent>\r\n        <DialogActions style={{backgroundColor:'#eee'}} >\r\n          <Button size='medium' variant=\"contained\" onClick={()=>setConfirmClosed(null)} color=\"secondary\" startIcon={<CloseSharp/>} >\r\n            No\r\n          </Button>\r\n          <Button size='medium' variant=\"contained\" onClick={()=>{onClosed(confirmClosed);setConfirmClosed(null)}} color=\"primary\" startIcon={<CheckCircleOutlineRounded/>} type='submit'>\r\n            Yes\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {toast.open &&\r\n      <Snackbar anchorOrigin={{ vertical:'top', horizontal:'center' }} open={toast.open} autoHideDuration={5000} onClose={()=>setToast({msg:\"\",open:false,type:\"\"})}>\r\n        <Alert elevation={6} variant=\"filled\" onClose={()=>setToast({msg:\"\",open:false,type:\"\"})} severity={toast.type}>\r\n          {toast.msg}\r\n        </Alert>\r\n      </Snackbar>\r\n      }\r\n    </Paper>\r\n  );\r\n}\r\n\r\n// model add\r\nconst AddPickingModal=({open,handleClose,handleSetToast=()=>{},handleOnSuccess=()=>{}})=>{\r\n  const classes = useStyles();\r\n  const [wms_doc,setWmsDoc]=useState(\"\")\r\n  const [customer,setCustomer]=useState(\"\")\r\n  const [to_wh,setToWH]=useState(\"\")\r\n  const [grade,setGrade]=useState(\"\")\r\n  const [lot,setLot]=useState(\"\")\r\n  const [sku,setSKU]=useState(\"\")\r\n  const [status,setStatus]=useState(\"\")\r\n  const [qty_pick,setQtyPick]=useState(\"\")\r\n  const [unit,setUnit]=useState(\"\")\r\n  const [isLoading,setIsLoading]=useState(false)\r\n\r\n  useEffect(() => {\r\n        //on component unmount\r\n        return () => {}\r\n  }, [])\r\n\r\n  const onSubmitForm=(event)=>{\r\n    window.loading.onLoading();\r\n    setIsLoading(true)\r\n    let qty_pick_value = !(qty_pick==\"\") ? Number(qty_pick) : qty_pick\r\n    GCLService.post('/v2/Picking_Plan_Front',{wms_doc,customer,to_wh,grade,lot,sku,status,qty_pick:qty_pick_value,unit}).then(res=>{\r\n      window.loading.onLoaded();\r\n      setIsLoading(false)\r\n      if(!res.data._result.status) {\r\n        handleSetToast({msg:\"Fail : \"+res.data._result.message ,open:true,type:'error'})\r\n        return ;\r\n      }\r\n      handleSetToast({msg:\"Success\",open:true,type:'success'})\r\n      handleOnSuccess()\r\n      handleClose()\r\n    })    \r\n    event.preventDefault()\r\n  }\r\n\r\n  return <>\r\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\" maxWidth='xs'>\r\n      <form onSubmit={onSubmitForm} autoComplete=\"off\">\r\n      <DialogTitle id=\"form-dialog-title\" onClose={handleClose}><center>Add Picking</center></DialogTitle>\r\n      <DialogContent>\r\n          <TextField autoFocus type=\"text\" margin=\"dense\" id=\"wms_doc\" label=\"WMS Doc\" fullWidth required value={wms_doc} onChange={(event)=>setWmsDoc(event.target.value)} helperText={null}/>\r\n          <TextField type=\"text\" margin=\"dense\" id=\"customer\" label=\"Customer\" fullWidth required value={customer} onChange={(event)=>setCustomer(event.target.value)} />\r\n          <TextField type=\"text\" margin=\"dense\" id=\"to_wh\" label=\"To WH\" fullWidth required value={to_wh} onChange={(event)=>setToWH(event.target.value)} />\r\n          <TextField type=\"text\" margin=\"dense\" id=\"grade\" label=\"Grade\" fullWidth required value={grade} onChange={(event)=>setGrade(event.target.value)} />\r\n          <TextField type=\"text\" margin=\"dense\" id=\"lot\" label=\"Lot\" fullWidth required value={lot} onChange={(event)=>setLot(event.target.value)} />\r\n          <TextField type=\"text\" margin=\"dense\" id=\"sku\" label=\"SKU\" fullWidth required value={sku} onChange={(event)=>setSKU(event.target.value)} />\r\n          <TextField type=\"text\" margin=\"dense\" id=\"status\" label=\"Status\" fullWidth required value={status} onChange={(event)=>setStatus(event.target.value)} />\r\n          <TextField type=\"number\" margin=\"dense\" id=\"qty_pick\" label=\"Qty Pick\" fullWidth required value={qty_pick} onChange={(event)=>setQtyPick(event.target.value)} />\r\n          <TextField type=\"text\" margin=\"dense\" id=\"unit\" label=\"Unit\" fullWidth required InputProps={{step:1}} value={unit} onChange={(event)=>setUnit(event.target.value)} />\r\n      </DialogContent>\r\n      <DialogActions style={{backgroundColor:'#eee'}}>\r\n        {isLoading ?\r\n          <CircularProgress /> :\r\n          <>\r\n            <Button size='small' variant=\"contained\" onClick={handleClose} color=\"secondary\" startIcon={<CloseSharp/>} >\r\n              Cancel\r\n            </Button>\r\n            <Button size='small' variant=\"contained\" onClick={()=>{}} color=\"primary\" startIcon={<Save/>} type='submit'>\r\n              Save\r\n            </Button>\r\n          </>\r\n        }\r\n      </DialogActions>\r\n      </form>\r\n    </Dialog>\r\n  </>\r\n}\r\n\r\nexport default PickingMonitor"],"sourceRoot":""}