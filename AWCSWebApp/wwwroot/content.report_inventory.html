<div class="row mb-3">
    <div class="col-12">
        <h5>ข้อมูลสินค้าคงคลัง รายพาเลท</h5>
    </div>
</div>
<div class="row">
    <div class="col-12">

        <table class="table table-sm">
            <thead class="table-dark">
                <tr>
                    <td>คลังสินค้า</td>
                    <td>ตำแหน่ง</td>
                    <td>สินค้า</td>
                    <td>เกรด</td>
                    <td>ลอท</td>
                    <td>ลำดับพาเลท</td>
                    <td>จำนวน</td>
                    <td>สถานะ</td>
                </tr>
                <tr>
                    <td><input type="text" class="form-control" id="txtWh"></td>
                    <td><input type="text" class="form-control" id="txtLoc"></td>
                    <td><input type="text" class="form-control" id="txtSku"></td>
                    <td><input type="text" class="form-control" id="txtGrade"></td>
                    <td><input type="text" class="form-control" id="txtLot"></td>
                    <td><input type="text" class="form-control" id="txtItemNo"></td>
                    <td><input type="text" class="form-control" id="txtQty"></td>
                    <td><input type="text" class="form-control" id="txtStatus"></td>
                </tr>
            </thead>
            <tbody id="tbody">
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="8">Page:<input type="number" class="form-control" id="txtPage" value="1"></td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>

<script>
    function page_load() {
        app.get('get_inventory_pallet', {
            wh: $('#txtWh').val(),
            loc: $('#txtLoc').val(),
            sku: $('#txtSku').val(),
            grade: $('#txtGrade').val(),
            lot: $('#txtLot').val(),
            itemNo: $('#txtItemNo').val(),
            qty: $('#txtQty').val(),
            status: $('#txtStatus').val(),
        },
            (data) => {
                var tbody = $('#tbody');
                tbody.html('');
                data.response.forEach((v) => {
                    var tr = $('<tr ' +
                        (v.AllocateCount + v.WorkingCount > 0 ? '' : 'style="background:#DDD;"') +
                        '>' +
                        '<td>' + v.Wh + '</td>' +
                        '<td>' + v.DesName + '</td>' +
                        '<td>' + v.SkuCode + '</td>' +
                        '<td>' + v.SkuGrade + '</td>' +
                        '<td>' + v.SkuLot + '</td>' +
                        '<td>' + v.SumQty + '</td>' +
                        '<td>' + v.AllocateCount + '</td>' +
                        '<td>' + v.WorkingCount + '</td>' +
                        '<td>' + v.DoneCount + '</td>' +
                        '<td>' + v.RejectCount + '</td>' +
                        '<td><button class="btn btn-danger" onclick="confirm_closed_buwork(\'' + v.TrxRef + '\')">จบงาน</button></td>' +
                        '</tr>');
                    tbody.append(tr);
                });
            }, () => {
            });
    }
    page_load();
</script>